<!DOCTYPE html>
<html lang="en">

<head>
   <meta charset="utf-8">
   <meta http-equiv="X-UA-Compatible" content="IE=edge">
   <meta name="viewport" content="width=device-width, initial-scale=1">
   <meta name="viewport" content="initial-scale=1, maximum-scale=1">
   <title>MOHO ADMIN</title>
   <meta name="keywords" content="">
   <meta name="description" content="">
   <meta name="author" content="">
   <link rel="icon" href="/img/fevicon.png" type="image/png" />
   <link rel="stylesheet" href="/css/bootstrap.min.css" />
   <link rel="stylesheet" href="/css/style.css" />
   <link rel="stylesheet" href="/css/responsive.css" />
   <link rel="stylesheet" href="/css/custom.css" />
   <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
</head>
<style>
   table {
      border-collapse: collapse;
      width: 100%;
   }

   th,
   td {
      padding: 8px;
      text-align: left;
      border-bottom: 1px solid #ddd;
   }

   tr:hover {
      background-color: coral;
   }

   .dropdown-menu {

      min-width: 20rem;
      left: 0 px;

   }
</style>
<!-- tìm t cái style kia -->

<body class="inner_page tables_page">
   <div class="full_container">
      <div class="inner_container">
         <nav id="sidebar">
            <div class="sidebar_blog_1">
               <div class="sidebar-header">
                  <div class="logo_section">
                     <a href="index.html"><img class="logo_icon img-responsive" src="images/logo/logo_icon.png"
                           alt="#" /></a>
                  </div>
               </div>
               <div class="sidebar_user_info">
                  <div class="icon_setting"></div>
                  <div class="user_profle_side">
                     <div class="user_img"><img class="img-responsive" src="/img/user_img.jpg" alt="#" />
                     </div>
                     <div class="user_info">
                        <h6>admin</h6>
                        <p><span class="online_animation"></span> Online</p>
                     </div>
                  </div>
               </div>
            </div>
            <div class="sidebar_blog_2">
               <h4>General</h4>
               <ul class="list-unstyled components">
                  <li><a href="/admin/"><i class="fa fa-dashboard yellow_color"></i> <span>Dashboard</span></a>
                  </li>
                  <li><a href="/admin/UserManagement"><i class="fa fa-table purple_color2"></i> <span>User
                           Management</span></a>
                  </li>

                  <li><a href="/admin/ProductManagement"><i class="fa fa-briefcase blue1_color"></i> <span>Product
                           Management</span></a>
                  </li>
                  <li class="dropdown">
                     <a class="dropdown-toggle" data-toggle="dropdown">
                        <i class="fa fa-table purple_color2"></i> <span>Order Management</span> <b class="caret"></b>
                     </a>
                     <ul class="dropdown-menu">
                        <li><a href="/admin/orderManagement/pending">Chờ xác nhận</a></li>
                        <li><a href="/admin/orderManagement/confirmed">Đã xác nhận</a></li>
                        <li><a href="/admin/orderManagement/delivering">Đang giao</a></li>
                        <li><a href="/admin/orderManagement/delivered">Đã giao</a></li>
                        <li><a href="/admin/orderManagement/cancelled">Đã hủy</a></li>
                     </ul>
                  </li>
               </ul>
            </div>
         </nav>
         <div id="content">
            <div class="topbar">
               <nav class="navbar navbar-expand-lg navbar-light">
                  <div class="full">
                     <button type="button" id="sidebarCollapse" class="sidebar_toggle"><i
                           class="fa fa-bars"></i></button>

                     <div class="right_topbar">
                        <div class="icon_info">
                           <ul class="user_profile_dd">
                              <li>
                                 <a class="dropdown-toggle" data-toggle="dropdown"><img
                                       class="img-responsive rounded-circle" src="/img/user_img.jpg" alt="#" /><span
                                       class="name_user">ADMIN</span></a>
                                 <div class="dropdown-menu">
                                    <a class="dropdown-item" href="help.html">Help</a>
                                    <a class="dropdown-item" href="http://localhost:7888/home"><span>Log Out</span> <i
                                          class="fa fa-sign-out"></i></a>
                                 </div>
                              </li>
                           </ul>
                        </div>
                     </div>
                  </div>
               </nav>
            </div>
            <div class="midde_cont">
               <div class="container-fluid">
                  <div class="row column_title">
                     <div class="col-md-12">
                        <div class="page_title">
                           <h2>QUẢN LÍ NGƯỜI DÙNG</h2>
                        </div>
                     </div>
                  </div>
               </div>
            </div>
            <form action="/admin/searchCustomer" method="GET"
               style="margin-bottom: 20px; display: flex; justify-content: right;">
               <input type="text" name="customer" placeholder="Nhập ID người dùng"
                  style="margin-right: 10px; padding: 5px; width: 334px;">
               <input type="submit" value="Tìm kiếm"
                  style="padding: 5px 10px; background-color: #4CAF50; color: white; border: none; cursor: pointer;">
            </form>
            <div class="container"
               style="border: 2px solid #007BFF; border-radius: 10px; padding: 20px; max-width : 1400px">
               <form action="/admin/USER" method="post" class="form-horizontal">
                  <fieldset>
                     <legend class="text-center" style="font-weight: bold;">Thêm người dùng mới</legend>

                     <div class="form-group row">
                        <div class="col-sm-3">
                           <label>Tên</label>
                           <input type="text" class="form-control" name="name">
                        </div>
                        <div class="col-sm-3">
                           <label>Email</label>
                           <input type="email" class="form-control" name="email"
                              pattern="[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,}$" required>
                        </div>
                        <div class="col-sm-3">
                           <label>Số điện thoại</label>
                           <input type="tel" class="form-control" name="phone">
                        </div>
                        <div class="col-sm-3">
                           <label>Địa chỉ</label>
                           <input type="text" class="form-control" name="address">
                        </div>
                     </div>

                     <div class="form-group row">

                        <div class="col-sm-3">
                           <label>Ngày sinh</label>
                           <input type="date" class="form-control" name="birthday">
                        </div>
                        <div class="col-sm-3">
                           <label>Vai trò</label>
                           <input type="text" class="form-control" name="role" pattern="\d+" required>
                        </div>
                        <div class="col-sm-3">
                           <label>Mật khẩu</label>
                           <input type="password" class="form-control" name="password">
                        </div>
                        <div class="col-sm-3">
                           <label>Tên người dùng</label>
                           <input type="text" class="form-control" name="username">
                        </div>
                     </div>

                     <div class="form-group row">
                        <div class="col-sm-5">
                           <label>Hình ảnh người dùng</label>
                           <div style="width: 100px; height: 100px; border: 1px solid #ccc;">
                              <img id="userimage" src="#" alt="your image"
                                 style="width: 100%; height: 100%; object-fit: cover;" />
                           </div>
                           <input type="file" class="form-control" name="userimage"
                              onchange="document.getElementById('userimage').src = window.URL.createObjectURL(this.files[0])">
                        </div>
                     </div>

                     <div class="form-group">
                        <div class="col-sm-offset-2 col-sm-10">
                           <button type="submit" class="btn btn-primary">Lưu</button>
                        </div>
                     </div>
                  </fieldset>
               </form>
            </div>


            <div class="table-container" style="margin-top: 30px;">
               <!-- <h2 style="text-align: center; color: #007BFF; font-family: Arial, sans-serif;">Danh sách người dùng</h2> -->

               <table>
                  <tr>
                     <th>Id</th>
                     <th>Tên</th>
                     <th>Email</th>
                     <th>Số điện thoại</th>
                     <th>Địa chỉ</th>
                     <th>Ngày sinh</th>
                     <th>Vai trò</th>
                     <th>Tài khoản</th>
                     <th>Hình ảnh</th>
                  </tr>
                  <% for (const user of listUser) { %>
                     <tr>
                        <td>
                           <%= user.customer_id%>
                        </td>
                        <td>
                           <%= user.name %>
                        </td>
                        <td>
                           <%= user.email %>
                        </td>
                        <td>
                           <%= user.phone %>
                        </td>
                        <td>
                           <%= user.address %>
                        </td>
                        <td>
                           <% let date=new Date(user.birthday); let formattedDate=date.toLocaleDateString('vi-VN'); %>
                              <%= formattedDate %>
                        </td>
                        <td>
                           <%= user.role %>
                        </td>
                        <td>
                           <%= user.user_name %>
                        </td>
                        <td>
                           <img src="/public/userimg/<%= user.user_img%>" alt="User Image"
                              style="width: 50px; height: 50px;">
                        </td>

                        <td style="text-align: center;">
                           <a href="/admin/update/<%=user.customer_id%>"
                              style="margin-right: 10px; padding: 10px 20px; background-color: #4CAF50; color: white; text-decoration: none; border-radius: 5px;">
                              Sửa
                           </a>
                           <form action="/admin/delete-user/<%=user.customer_id%>" method="POST"
                              style="display: inline;">
                              <button
                                 style="padding: 10px 20px; background-color: #f44336; color: white; border: none; border-radius: 5px;">
                                 Xóa
                              </button>
                           </form>
                        </td>

                     </tr>
                     <% } %>
               </table>
            </div>
         </div>
      </div>
   </div>
   <script src="js/jquery.min.js"></script>
   <script src="js/bootstrap.min.js"></script>

   <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
   <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
   <script>
      $(document).ready(function () {
         $(".dropdown-toggle").click(function () {
            $(this).next(".dropdown-menu").toggle();
         });
      });
   </script>
</body>

</html>